<!DOCTYPE html>

<html>
<head>
  <title>I18n.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="layout.css" />
  <style>
    /*--------------------- Layout and Typography ----------------------------*/
body { font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif; font-size: 15px; line-height: 22px; color: #252519; margin: 0; padding: 0;
}
a { color: #261a3b;
} a:visited { color: #261a3b; }
p { margin: 0 0 15px 0;
}
h1, h2, h3, h4, h5, h6 { margin: 40px 0 15px 0;
} h3, h4, h5, h6 { margin-top: 20px; }
#container { position: relative;
}
#background { position: fixed; top: 0; left: 575px; right: 0; bottom: 0; background: #f5f5ff; border-left: 1px solid #e5e5ee; z-index: -1;
}
#jump_to, #jump_page { background: white; -webkit-box-shadow: 0 0 25px #777; -moz-box-shadow: 0 0 25px #777; -webkit-border-bottom-left-radius: 5px; -moz-border-radius-bottomleft: 5px; font: 10px Arial; text-transform: uppercase; cursor: pointer; text-align: right;
}
#jump_to, #jump_wrapper { position: fixed; right: 0; top: 0; padding: 5px 10px;
} #jump_wrapper { padding: 0; display: none; } #jump_to:hover #jump_wrapper { display: block; } #jump_page { padding: 5px 0 3px; margin: 0 0 25px 25px; overflow:hidden; } #jump_page .source { display: block; padding: 5px 10px; text-decoration: none; border-top: 1px solid #eee; float:left; min-width:180px; text-align:left; text-transform:none; font-size:11px; } #jump_page .source:hover { background: #f5f5ff; } #jump_page .source:first-child { }
table td { border: 0; outline: 0;
} td.docs, th.docs { max-width: 450px; min-width: 450px; min-height: 5px; padding: 10px 25px 1px 50px; overflow-x: hidden; vertical-align: top; text-align: left; } .docs pre { margin: 15px 0 15px; padding-left: 15px; } .docs p tt, .docs p code { background: #f8f8ff; border: 1px solid #dedede; font-size: 12px; padding: 0 0.2em; } .pilwrap { position: relative; } .pilcrow { font: 12px Arial; text-decoration: none; color: #454545; position: absolute; top: 3px; left: -20px; padding: 1px 2px; opacity: 0; -webkit-transition: opacity 0.2s linear; } td.docs:hover .pilcrow { opacity: 1; } td.code, th.code { padding: 14px 15px 16px 25px; width: 100%; vertical-align: top; background: #f5f5ff; border-left: 1px solid #e5e5ee; } pre, tt, code { font-size: 12px; line-height: 18px; font-family: Monaco, Consolas, "Lucida Console", monospace; margin: 0; padding: 0; } /*---------------------- Syntax Highlighting -----------------------------*/
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
body .hll { background-color: #ffffcc }
body .c { color: #408080; font-style: italic } /* Comment */
body .err { border: 1px solid #FF0000 } /* Error */
body .k { color: #954121 } /* Keyword */
body .o { color: #666666 } /* Operator */
body .cm { color: #408080; font-style: italic } /* Comment.Multiline */
body .cp { color: #BC7A00 } /* Comment.Preproc */
body .c1 { color: #408080; font-style: italic } /* Comment.Single */
body .cs { color: #408080; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .gr { color: #FF0000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #00A000 } /* Generic.Inserted */
body .go { color: #808080 } /* Generic.Output */
body .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #0040D0 } /* Generic.Traceback */
body .kc { color: #954121 } /* Keyword.Constant */
body .kd { color: #954121; font-weight: bold } /* Keyword.Declaration */
body .kn { color: #954121; font-weight: bold } /* Keyword.Namespace */
body .kp { color: #954121 } /* Keyword.Pseudo */
body .kr { color: #954121; font-weight: bold } /* Keyword.Reserved */
body .kt { color: #B00040 } /* Keyword.Type */
body .m { color: #666666 } /* Literal.Number */
body .s { color: #219161 } /* Literal.String */
body .na { color: #7D9029 } /* Name.Attribute */
body .nb { color: #954121 } /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold } /* Name.Class */
body .no { color: #880000 } /* Name.Constant */
body .nd { color: #AA22FF } /* Name.Decorator */
body .ni { color: #999999; font-weight: bold } /* Name.Entity */
body .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
body .nf { color: #0000FF } /* Name.Function */
body .nl { color: #A0A000 } /* Name.Label */
body .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
body .nt { color: #954121; font-weight: bold } /* Name.Tag */
body .nv { color: #19469D } /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mf { color: #666666 } /* Literal.Number.Float */
body .mh { color: #666666 } /* Literal.Number.Hex */
body .mi { color: #666666 } /* Literal.Number.Integer */
body .mo { color: #666666 } /* Literal.Number.Oct */
body .sb { color: #219161 } /* Literal.String.Backtick */
body .sc { color: #219161 } /* Literal.String.Char */
body .sd { color: #219161; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #219161 } /* Literal.String.Double */
body .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
body .sh { color: #219161 } /* Literal.String.Heredoc */
body .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
body .sx { color: #954121 } /* Literal.String.Other */
body .sr { color: #BB6688 } /* Literal.String.Regex */
body .s1 { color: #219161 } /* Literal.String.Single */
body .ss { color: #19469D } /* Literal.String.Symbol */
body .bp { color: #954121 } /* Name.Builtin.Pseudo */
body .vc { color: #19469D } /* Name.Variable.Class */
body .vg { color: #19469D } /* Name.Variable.Global */
body .vi { color: #19469D } /* Name.Variable.Instance */
body .il { color: #666666 } /* Literal.Number.Integer.Long */ /********** PHP Comment Additions ********/
td.docs .docparam {color:#DB251A;font-weight:bold;}
  </style>
</head>
<body>
  <div id="container">
    <div id="background"></div>
          <div id="jump_to">
        Jump To &hellip;
        <div id="jump_wrapper">
          <div id="jump_page">
                                          <a class="source" href="./Acl.html">
                              Acl.php              </a>
                                          <a class="source" href="./AppTest.html">
                              AppTest.php              </a>
                                          <a class="source" href="./Autoloader.html">
                              Autoloader.php              </a>
                                          <a class="source" href="./Cache.html">
                              Cache.php              </a>
                                          <a class="source" href="./Controller.html">
                              Controller.php              </a>
                                          <a class="source" href="./Database.html">
                              Database.php              </a>
                                          <a class="source" href="./Debugger.html">
                              Debugger.php              </a>
                                          <a class="source" href="./ExtendedModel.html">
                              ExtendedModel.php              </a>
                                          <a class="source" href="./Form.html">
                              Form.php              </a>
                                          <a class="source" href="./Functions.html">
                              Functions.php              </a>
                                          <a class="source" href="./I18n.html">
                              I18n.php              </a>
                                          <a class="source" href="./Ini.html">
                              Ini.php              </a>
                                          <a class="source" href="./Mailer.html">
                              Mailer.php              </a>
                                          <a class="source" href="./MemcacheExt.html">
                              MemcacheExt.php              </a>
                                          <a class="source" href="./MemcacheRedis.html">
                              MemcacheRedis.php              </a>
                                          <a class="source" href="./Model.html">
                              Model.php              </a>
                                          <a class="source" href="./MongoManager.html">
                              MongoManager.php              </a>
                                          <a class="source" href="./MongoModel.html">
                              MongoModel.php              </a>
                                          <a class="source" href="./Page.html">
                              Page.php              </a>
                                          <a class="source" href="./Product.html">
                              Product.php              </a>
                                          <a class="source" href="./Restful.html">
                              Restful.php              </a>
                                          <a class="source" href="./Template.html">
                              Template.php              </a>
                      </div>
        </div>
      </div>
        <table cellpadding="0" cellspacing="0">
      <thead>
        <tr>
          <th class="docs">
            <h1>
              I18n.php            </h1>
          </th>
          <th class="code">
          </th>
        </tr>
      </thead>
      <tbody>
                  <tr id="section-0">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-0">&#182;</a>
              </div>
              <p>Elefant CMS - http:www.elefantcms.com/</p>

<p>Copyright (c) 2011 Johnny Broadway</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre></pre></div>            </td>
          </tr>
                  <tr id="section-1">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>I18n is a class that makes it easier to add multiple language support
 to PHP programs.  It is lightweight and not very sophisticated, attempting
 to keep it straight-forward while emulating some of the more elegant features
 of other internationalization systems, such as gettext.</p>

<p>Translation files are PHP, so they benefit from language-level caching,
 and string replacement is simply an associative array lookup.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre><span class="k">class</span> <span class="nc">I18n</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-2">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>The language code, corresponding to the name of the language
 file.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$language</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-3">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>The locale code, corresponding to the name of the country
 to localize numbers and dates for.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$locale</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-4">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>The location of the language files.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$directory</span> <span class="o">=</span> <span class="s1">&#39;lang&#39;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-5">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>The language hash, a key/value list.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$lang_hash</span> <span class="o">=</span> <span class="k">array</span> <span class="p">();</span></pre></div>            </td>
          </tr>
                  <tr id="section-6">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>The language fallback order.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$hash_order</span> <span class="o">=</span> <span class="k">array</span> <span class="p">();</span></pre></div>            </td>
          </tr>
                  <tr id="section-7">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>The charset of the current language, which can be used to tell
 the browser, or any language-aware PHP functions, which to use.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$charset</span> <span class="o">=</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-8">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>The full name of language in use (ie. 'English' for 'en').</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$fullname</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-9">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Contains fallback text replacements.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$fallbacks</span> <span class="o">=</span> <span class="k">array</span> <span class="p">();</span></pre></div>            </td>
          </tr>
                  <tr id="section-10">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>2-D list of available languages, retrieved from <code>getLanguages()</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$languages</span> <span class="o">=</span> <span class="k">array</span> <span class="p">();</span></pre></div>            </td>
          </tr>
                  <tr id="section-11">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>The name of the language cookie for <code>$negotiation=cookie</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$cookieName</span> <span class="o">=</span> <span class="s1">&#39;lang&#39;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-12">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Tells the controller that the first level of the URL is the language
 and not the page ID when <code>$negotiation=url</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$url_includes_lang</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-13">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>If <code>$url_includes_lang</code> is true, this will include the request with
 the language stripped out.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$new_request_uri</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-14">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>If <code>$url_includes_lang</code> is true, this will include the stripped out
 part of the URL. Otherwise it will be empty. This is useful for
 including language URL prefixes in views via <code>{{ i18n.prefix }}</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-15">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>The negotiation method used to determine the current language.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$negotiation</span> <span class="o">=</span> <span class="s1">&#39;url&#39;</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-16">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>If an error occurs during any portion of this class, this
 will contain the message.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="nv">$error</span><span class="p">;</span></pre></div>            </td>
          </tr>
                  <tr id="section-17">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Includes the appropriate language file in the provided <code>$directory</code>.
 This file is intended to fill out the <code>$lang_hash</code> array.
 <code>$negotiationMethod</code> determines the method whereby the language of
 choice is determined. See the <code>negotiate()</code> method for more info on this.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span> <span class="p">(</span><span class="nv">$directory</span> <span class="o">=</span> <span class="s1">&#39;lang&#39;</span><span class="p">,</span> <span class="nv">$conf</span> <span class="o">=</span> <span class="k">array</span> <span class="p">())</span> <span class="p">{</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">directory</span> <span class="o">=</span> <span class="nv">$directory</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span> <span class="p">(</span><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;negotiation_method&#39;</span><span class="p">]))</span> <span class="p">{</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">negotiation</span> <span class="o">=</span> <span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;negotiation_method&#39;</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span> <span class="p">(</span><span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;cookie_name&#39;</span><span class="p">]))</span> <span class="p">{</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cookieName</span> <span class="o">=</span> <span class="nv">$conf</span><span class="p">[</span><span class="s1">&#39;cookie_name&#39;</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getLanguages</span> <span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nb">is_array</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">))</span> <span class="p">{</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span> <span class="o">=</span> <span class="k">array</span> <span class="p">();</span>
   <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
   <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span> <span class="k">as</span> <span class="nv">$lang</span> <span class="o">=&gt;</span> <span class="nv">$props</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$props</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="k">true</span><span class="p">)</span> <span class="p">{</span>
     <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">default</span> <span class="o">=</span> <span class="nv">$lang</span><span class="p">;</span>
     <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
   <span class="p">}</span>
  <span class="p">}</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">negotiate</span> <span class="p">();</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">charset</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;charset&#39;</span><span class="p">];</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fullname</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setLocale</span> <span class="p">();</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getIndex</span> <span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nb">extension_loaded</span> <span class="p">(</span><span class="s1">&#39;mbstring&#39;</span><span class="p">))</span> <span class="p">{</span>
   <span class="nb">mb_internal_encoding</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">charset</span><span class="p">);</span>
  <span class="p">}</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-18">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Calls <code>setlocale()</code> based on the current language.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="k">function</span> <span class="nf">setLocale</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="nx">LC_TIME</span><span class="p">);</span></pre></div>            </td>
          </tr>
                  <tr id="section-19">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>| LC<em>MONETARY | LC</em>CTYPE | LC_COLLATE);</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">empty</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;locale&#39;</span><span class="p">]))</span> <span class="p">{</span>
   <span class="nv">$params</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;code&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;_&#39;</span> <span class="o">.</span> <span class="nb">strtoupper</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;locale&#39;</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;.&#39;</span> <span class="o">.</span> <span class="nb">str_replace</span> <span class="p">(</span><span class="s1">&#39;ISO-&#39;</span><span class="p">,</span> <span class="s1">&#39;ISO&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">charset</span><span class="p">);</span>
   <span class="nv">$params</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;code&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;_&#39;</span> <span class="o">.</span> <span class="nb">strtoupper</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;locale&#39;</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="nv">$params</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">][</span><span class="s1">&#39;code&#39;</span><span class="p">];</span>
  <span class="k">return</span> <span class="nb">call_user_func_array</span> <span class="p">(</span><span class="s1">&#39;setlocale&#39;</span><span class="p">,</span> <span class="nv">$params</span><span class="p">);</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-20">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Includes the language index.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="k">function</span> <span class="nf">getIndex</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">((</span><span class="o">!</span> <span class="k">empty</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">file_exists</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">directory</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span> <span class="o">.</span> <span class="s1">&#39;.php&#39;</span><span class="p">)))</span> <span class="p">{</span>
   <span class="k">include_once</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">directory</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span> <span class="o">.</span> <span class="s1">&#39;.php&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hash_order</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">);</span>
  <span class="nv">$curlang</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">language</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$curlang</span><span class="p">][</span><span class="s1">&#39;fallback&#39;</span><span class="p">])</span> <span class="p">{</span>
   <span class="nv">$curlang</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$curlang</span><span class="p">][</span><span class="s1">&#39;fallback&#39;</span><span class="p">];</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hash_order</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$curlang</span><span class="p">;</span>
   <span class="k">include_once</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">directory</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$curlang</span> <span class="o">.</span> <span class="s1">&#39;.php&#39;</span><span class="p">);</span>
  <span class="p">}</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-21">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Takes a string, serializes it to generate a key, and performs
 a key/value lookup on the <code>$lang_hash</code> array.  Returns the value found,
 or the original string if not found.  This is the method used in I18n
 to return translated text.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="k">function</span> <span class="nf">get</span> <span class="p">(</span><span class="nv">$original</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">empty</span> <span class="p">(</span><span class="nv">$original</span><span class="p">))</span> <span class="p">{</span>
   <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hash_order</span> <span class="k">as</span> <span class="nv">$lang</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">empty</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lang_hash</span><span class="p">[</span><span class="nv">$lang</span><span class="p">][</span><span class="nv">$original</span><span class="p">]))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lang_hash</span><span class="p">[</span><span class="nv">$lang</span><span class="p">][</span><span class="nv">$original</span><span class="p">];</span>
   <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nv">$original</span><span class="p">;</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-22">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Takes a string, serializes it to generate a key, and performs
 a key/value lookup on the <code>$lang_hash</code> array.  Returns the value found,
 or the original string if not found.  This method is similar to
 <code>get()</code>, except it uses <code>vsprintf()</code> to insert values.
 If you pass an array as the second value, it will use that instead of
 however many additional arguments you fed it.  This is handy
 because if you already have all your values in an array, you can
 simply say <code>getf($original, $array)</code> instead of <code>getf($original, $array[0],
 $array[1], $array[2])</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="k">function</span> <span class="nf">getf</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nv">$args</span> <span class="o">=</span> <span class="nb">func_get_args</span> <span class="p">();</span>

  <span class="nv">$original</span> <span class="o">=</span> <span class="nb">array_shift</span> <span class="p">(</span><span class="nv">$args</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$original</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span> <span class="p">(</span><span class="nv">$args</span><span class="p">[</span><span class="m">0</span><span class="p">]))</span> <span class="p">{</span>
   <span class="nv">$args</span> <span class="o">=</span> <span class="nv">$args</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">foreach</span> <span class="p">(</span><span class="nb">array_keys</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lang_hash</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$lang</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">empty</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lang_hash</span><span class="p">[</span><span class="nv">$lang</span><span class="p">][</span><span class="nv">$original</span><span class="p">]))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">vsprintf</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lang_hash</span><span class="p">[</span><span class="nv">$lang</span><span class="p">][</span><span class="nv">$original</span><span class="p">],</span> <span class="nv">$args</span><span class="p">);</span>
   <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nb">vsprintf</span> <span class="p">(</span><span class="nv">$original</span><span class="p">,</span> <span class="nv">$args</span><span class="p">);</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-23">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Returns a 2-D array from the specified language file, which
 is an INI file.  Each section name in the file corresponds to a
 different available language.  Keys in each section include
 'name', 'code', 'locale', 'charset', 'fallback', and 'default'.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="k">function</span> <span class="nf">getLanguages</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">directory</span> <span class="o">.</span> <span class="s1">&#39;/languages.php&#39;</span><span class="p">))</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nb">parse_ini_file</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">directory</span> <span class="o">.</span> <span class="s1">&#39;/languages.php&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
   <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">error</span> <span class="o">=</span> <span class="s1">&#39;Language file (&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">directory</span> <span class="o">.</span> <span class="s1">&#39;/languages.php) does not exist!&#39;</span><span class="p">;</span>
   <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
  <span class="p">}</span>
 <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-24">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Returns the preferred language of the current visitor.
 If the <code>$method</code> is <code>'http'</code> then it uses the HTTP Accept-Language
 string for this info.  If the <code>$method</code> is <code>'cookie'</code> it uses a
 cookie (specified by the <code>$cookieName</code> property) to determine,
 if the <code>$method</code> is <code>'subdomain'</code> then it looks for it in the
 subdomain of the site (e.g., <code>en.sitename.com</code>, <code>fr.sitename.com</code>),
 and if the <code>$method</code> is <code>'url'</code> then it uses the start of the URL
 to determine the language (e.g., <code>/fr/</code> or <code>/en/</code>).
 Default is <code>'url'</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre> <span class="k">public</span> <span class="k">function</span> <span class="nf">negotiate</span> <span class="p">(</span><span class="nv">$method</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$method</span><span class="p">)</span> <span class="p">{</span>
   <span class="nv">$method</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">negotiation</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nv">$method</span> <span class="o">===</span> <span class="s1">&#39;http&#39;</span><span class="p">)</span> <span class="p">{</span>
   <span class="nv">$accepted</span> <span class="o">=</span> <span class="k">array</span> <span class="p">();</span>
   <span class="nv">$keys</span> <span class="o">=</span> <span class="nb">explode</span> <span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_ACCEPT_LANGUAGE&#39;</span><span class="p">]);</span>

   <span class="k">foreach</span> <span class="p">(</span><span class="nv">$keys</span> <span class="k">as</span> <span class="nv">$lang</span><span class="p">)</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-25">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Remove trailing ";q=" data</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nv">$pos</span> <span class="o">=</span> <span class="nb">strpos</span> <span class="p">(</span><span class="nv">$lang</span><span class="p">,</span> <span class="s1">&#39;;&#39;</span><span class="p">))</span> <span class="p">{</span>
     <span class="nv">$lang</span> <span class="o">=</span> <span class="nb">trim</span> <span class="p">(</span><span class="nb">substr</span> <span class="p">(</span><span class="nv">$lang</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="nv">$pos</span><span class="p">));</span>
    <span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-26">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Check for country code</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nv">$pos</span> <span class="o">=</span> <span class="nb">strpos</span> <span class="p">(</span><span class="nv">$lang</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">))</span> <span class="p">{</span>
     <span class="k">list</span> <span class="p">(</span><span class="nv">$lang</span><span class="p">,</span> <span class="nv">$cn</span><span class="p">)</span> <span class="o">=</span> <span class="nb">explode</span> <span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="nv">$lang</span><span class="p">);</span>

     <span class="k">if</span> <span class="p">(</span><span class="nv">$lang</span> <span class="o">===</span> <span class="s1">&#39;i&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$lang</span> <span class="o">=</span> <span class="nv">$cn</span><span class="p">;</span>
      <span class="nb">unset</span> <span class="p">(</span><span class="nv">$cn</span><span class="p">);</span>
     <span class="p">}</span>

     <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span> <span class="p">(</span><span class="nv">$cn</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span> <span class="p">(</span><span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span> <span class="p">(</span><span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">]))</span> <span class="p">{</span>
       <span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$cn</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
       <span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="nv">$cn</span><span class="p">);</span>
      <span class="p">}</span>
     <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="o">!</span> <span class="nb">isset</span> <span class="p">(</span><span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">])</span> <span class="o">||</span> <span class="o">!</span> <span class="nb">is_array</span> <span class="p">(</span><span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
     <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span> <span class="p">(</span><span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span> <span class="p">(</span><span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">][]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">$accepted</span><span class="p">[</span><span class="nv">$lang</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
     <span class="p">}</span>
    <span class="p">}</span>
   <span class="p">}</span>

   <span class="k">foreach</span> <span class="p">(</span><span class="nv">$accepted</span> <span class="k">as</span> <span class="nv">$lang</span> <span class="o">=&gt;</span> <span class="nv">$cnlist</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$cnlist</span> <span class="k">as</span> <span class="nv">$cn</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="k">empty</span> <span class="p">(</span><span class="nv">$cn</span><span class="p">))</span> <span class="p">{</span>
      <span class="nv">$name</span> <span class="o">=</span> <span class="nb">strtolower</span> <span class="p">(</span><span class="nv">$lang</span> <span class="o">.</span> <span class="s1">&#39;_&#39;</span> <span class="o">.</span> <span class="nv">$cn</span><span class="p">);</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nv">$name</span> <span class="o">=</span> <span class="nb">strtolower</span> <span class="p">(</span><span class="nv">$lang</span><span class="p">);</span>
     <span class="p">}</span>
     <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$name</span><span class="p">]))</span> <span class="p">{</span></pre></div>            </td>
          </tr>
                  <tr id="section-27">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Found</p>
            </td>
            <td class="code">
              <div class="highlight"><pre>      <span class="k">return</span> <span class="nv">$name</span><span class="p">;</span>
     <span class="p">}</span>
    <span class="p">}</span>
   <span class="p">}</span>

  <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$method</span> <span class="o">===</span> <span class="s1">&#39;cookie&#39;</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span>
    <span class="nb">isset</span> <span class="p">(</span><span class="nv">$_COOKIE</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cookieName</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
    <span class="nb">isset</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">[</span><span class="nv">$_COOKIE</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cookieName</span><span class="p">]])</span>
   <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$_COOKIE</span><span class="p">[</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cookieName</span><span class="p">];</span>
   <span class="p">}</span>

  <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$method</span> <span class="o">===</span> <span class="s1">&#39;url&#39;</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span> <span class="p">(</span><span class="s1">&#39;/^\/(&#39;</span> <span class="o">.</span> <span class="nb">join</span> <span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="nb">array_keys</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">))</span> <span class="o">.</span> <span class="s1">&#39;)\//&#39;</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">],</span> <span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url_includes_lang</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">new_request_uri</span> <span class="o">=</span> <span class="nb">preg_replace</span> <span class="p">(</span><span class="s1">&#39;/^\/&#39;</span> <span class="o">.</span> <span class="nv">$matches</span><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">]);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$matches</span><span class="p">[</span><span class="m">1</span><span class="p">];</span>
    <span class="k">return</span> <span class="nv">$matches</span><span class="p">[</span><span class="m">1</span><span class="p">];</span>
   <span class="p">}</span>

  <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$method</span> <span class="o">===</span> <span class="s1">&#39;subdomain&#39;</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span> <span class="p">(</span><span class="s1">&#39;/^(&#39;</span> <span class="o">.</span> <span class="nb">join</span> <span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="nb">array_keys</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">languages</span><span class="p">))</span> <span class="o">.</span> <span class="s1">&#39;)\./&#39;</span><span class="p">,</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">],</span> <span class="nv">$matches</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$matches</span><span class="p">[</span><span class="m">1</span><span class="p">];</span>
   <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">default</span><span class="p">;</span>

 <span class="p">}</span>
<span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-28">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Helper function available globablly. Alias of <code>I18n::get()</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre><span class="k">function</span> <span class="nf">i18n_get</span> <span class="p">(</span><span class="nv">$original</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">{</span>
 <span class="k">return</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;i18n&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">get</span> <span class="p">(</span><span class="nv">$original</span><span class="p">);</span>
<span class="p">}</span></pre></div>            </td>
          </tr>
                  <tr id="section-29">
            <td class="docs">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Helper function available globablly. Alias of <code>I18n::getf()</code>.</p>
            </td>
            <td class="code">
              <div class="highlight"><pre><span class="k">function</span> <span class="nf">i18n_getf</span> <span class="p">()</span> <span class="p">{</span>
 <span class="nv">$args</span> <span class="o">=</span> <span class="nb">func_get_args</span> <span class="p">();</span>
 <span class="k">return</span> <span class="nb">call_user_func_array</span> <span class="p">(</span><span class="k">array</span> <span class="p">(</span><span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;i18n&#39;</span><span class="p">],</span> <span class="s1">&#39;getf&#39;</span><span class="p">),</span> <span class="nv">$args</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x"></span>
</pre></div></pre></div>            </td>
          </tr>
              </tbody>
    </table>
  </div>
</body>
</html>
